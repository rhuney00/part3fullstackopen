(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(14),s=t.n(c),o=t(3),u=t(0),a=function(e){var n=e.value,t=e.setFilterName;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})]})},i=function(e){var n=e.newName,t=e.setNewName,r=e.newNumber,c=e.setNewNumber,s=e.persons,o=e.setPersons,a=e.servicePersons,i=e.setMessage,l=e.setMessageType;return Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:r,onChange:function(e){c(e.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:function(e){if(e.preventDefault(),s.filter((function(e){return e.name===n})).length>0){if(window.confirm("".concat(n," is already added to phonebook, replace old number with a new one?"))){var t={name:n,number:r},c=s.filter((function(e){return e.name===n}))[0].id;a.update(c,t).then((function(e){o(s.map((function(n){return n.id!==c?n:e})))})),i("Updated the phone number of ".concat(t.name)),l("good"),setTimeout((function(){i(null),l(null)}),5e3)}}else{var u={name:n,number:r};a.create(u).then((function(e){o(s.concat(e))})),i("Added ".concat(u.name)),l("good"),setTimeout((function(){i(null),l(null)}),5e3)}},children:"save"})})]})},l=function(e){var n=e.persons,t=e.setPersons,r=e.filterName,c=e.servicePersons,s=e.setMessage,o=e.setMessageType,a=r.length>0?n.filter((function(e){return e.name.includes(r)})):n;return Object(u.jsx)("div",{children:a.map((function(e){return Object(u.jsxs)("p",{children:[e.name," ",e.number," ",Object(u.jsx)("button",{onClick:function(){return r=e.id,void(window.confirm("Delete ".concat(n.filter((function(e){return e.id===r}))[0].name))&&c.deletePerson(r).then((function(){return t(n.filter((function(e){return e.id!==r})))})).then((function(){s("Deleted ".concat(n.filter((function(e){return e.id===r}))[0].name," from phonebook")),o("good"),setTimeout((function(){s(null),o(null)}),5e3)})).catch((function(e){s("Information of ".concat(n.filter((function(e){return e.id===r}))[0].name," has already been removed from server. Will remove contact now.")),o("bad"),t(n.filter((function(e){return e.id!==r}))),setTimeout((function(){s(null),o(null)}),5e3)})));var r},children:"delete"})]},e.id)}))})},d=function(e){var n=e.message,t=e.type;return null===n?null:"good"===t?Object(u.jsx)("div",{className:"success",children:n}):Object(u.jsx)("div",{className:"error",children:n})},f=t(4),b=t.n(f),j="api/persons",m={getAll:function(){return b.a.get(j).then((function(e){return e.data}))},create:function(e){return b.a.post(j,e).then((function(e){return e.data}))},update:function(e,n){return b.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return b.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))}},h=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],s=Object(r.useState)(""),f=Object(o.a)(s,2),b=f[0],j=f[1],h=Object(r.useState)(""),p=Object(o.a)(h,2),O=p[0],v=p[1],g=Object(r.useState)(""),x=Object(o.a)(g,2),w=x[0],N=x[1],P=Object(r.useState)(null),y=Object(o.a)(P,2),k=y[0],M=y[1],T=Object(r.useState)(null),S=Object(o.a)(T,2),C=S[0],A=S[1];return Object(r.useEffect)((function(){m.getAll().then((function(e){c(e)}))}),[]),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(d,{message:k,type:C}),Object(u.jsx)(a,{value:w,setFilterName:N}),Object(u.jsx)("h2",{children:"Add a new Number"}),Object(u.jsx)(i,{newName:b,setNewName:j,newNumber:O,setNewNumber:v,persons:t,setPersons:c,servicePersons:m,setMessage:M,setMessageType:A}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{persons:t,setPersons:c,filterName:w,servicePersons:m,setMessage:M,setMessageType:A})]})};t(38);s.a.render(Object(u.jsx)(h,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c06decd8.chunk.js.map